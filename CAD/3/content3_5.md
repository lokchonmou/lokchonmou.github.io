# 3.5 自製PCB電路板

[TOC]

在左上角的`file`中，開始一個新的`New Electronics Design`。

<img src="image-20230504110352603.png" alt="image-20230504110352603" style="zoom:50%;" />

- 進入管理頁面後，PCB板基本可分為電路圖和佈線圖。
- 可以將設計輸出成3D PCB板，並使用Fusion 360進行設計和模擬。
- 首先按左上角新增一個電路圖。

<img src="image-20230504110455192.png" alt="image-20230504110455192" style="zoom:50%;" />

## 電路圖

- 電路圖介面包含左側欄位和主要編輯區域。
- 左側欄位可以拖動，可以收起或放大。
- 主要編輯區域用來編輯電路圖，添加元件和連接。

<img src="image-20230504110911198.png" alt="image-20230504110911198" style="zoom:60%;" />



- 點擊`Grid Setting`。
- 打開格線，方便定位元件和連接線。

<div style="text-align: center">
<img src="image-20230504110936424.png" alt="image-20230504110936424" style="zoom:67%;" />　　　　　<img src="image-20230504111036605.png" alt="image-20230504111036605" style="zoom:67%;" />   </div>
### 插入零件

- 在命令欄中輸入`add`。

<img src="image-20230505105044451.png" alt="image-20230505105044451"  />

- 製作LED燈牌
- 第一步：搜尋貼片LED
- 貼片LED尺寸型號為3528
- 尺寸為3.5mm x 2.8mm
- Fusion360沒有安裝電子元件library
- 按`Open Library Manager`以打開library

<img src="image-20230505105220953.png" alt="image-20230505105220953" style="zoom: 50%;" />



- 接著搜尋`led`，將`in use`的選項剔選。

<img src="image-20230509174217377.png" alt="image-20230509174217377" style="zoom: 67%;" />

- 搜尋==`LEDKA-3528ASYC`==找到使用的LED
- 按`ok`隨意放在編輯區
- 按`Open Library Manager`以打開library
- 搜尋並加入`con-ptr500`元件庫
- 搜尋==`ak500/2`==找到3.5mm連接端子
- 按`ok`隨意放在編輯區

<img src="image-20230509174424510.png" alt="image-20230509174424510" style="zoom: 67%;" />



### 連接零件

- 複製4個LED
- 將4個LED串聯起來
- 將4個LED的模塊複製
- 重複以上步驟直到需要的數量
- 使用`net`連接零件
- 從元件庫中找到電源接腳元件，如`VCC`和`GND`
- 將電源接腳元件與LED元件連接

![LED BOARD SCH v10_1_cr](LED BOARD SCH v10_1_cr.png)



### Electrical Rule Check(ERC)

- 完成電路圖編輯後，使用ERC工具檢查零件連接
- ==在命令列中輸入`ERC`啟動功能==
- ERC工具檢查每個元件，列出錯誤（Error）或警告（Warning）
- 常見的警告包括忘記設定值，可以**點擊`Approve`按鈕接受警告**
- 根據錯誤信息修正電路圖中的錯誤
- 常見錯誤信息包括：忘記使用`Junction`來連接接線、接線沒有連接到相應的元件、接線漏接等

<img src="image-20230510095932843.png" alt="image-20230510095932843" style="zoom:80%;" />

## 佈線圖

- 完成電路圖編輯後，進行PCB佈線圖的設計
- 按下工具列上的**`SWITCH`**圖示切換到PCB佈線圖編輯模式
- 打開一個新的文件，用來進行PCB佈線圖設計

![image-20230505152214391](image-20230505152214391.png)

### 準備工作

- 切換到PCB佈線圖模式後，看到類似於電路圖編輯器的介面
- 元件已經被放置在旁邊
- 有幼細的綠色線，代表電路接線

<img src="image-20230510100132929.png" alt="image-20230510100132929" style="zoom: 50%;" />



- 設置網格和單位
- 點擊左上角的網格圖示或在命令列中輸入`grid`打開網格設置面板
- 設置`Display`為`On`，`Size`為`100mil`
- 可以將`Alt`設置為`50mil`，按下*鍵盤上的「Alt」鍵*時切換到50mil網格
- 所有的元件位置和線路走向鎖定在100mil的網格上，確保精確度和一致性
- 100mil即為1/1000英寸，在PCB設計中常用作間距和尺寸的單位

<img src="image-20230505152354464.png" alt="image-20230505152354464" style="zoom:50%;" />



我們設計的PCB板大小大約是70 x 60mm，所以換成mil的話就大約是2750 x 2360 mil。

1. 對著**<u>*下方*</u>**綠的的邊框線按**<u>*滑鼠右鍵*</u>**，打開`properties `。
2. 分別輸入線的兩點座標，「2750 , 2360 mil」和「0, 2360mil」。
3. 接下`ok`後，就會發覺就會變成梯形
4. 接著同樣在右方的邊框線按下滑鼠右鍵
5. 將右邊框的兩點座標設定成「2750 , 0 mil」和「2750, 2360mil」
6. 按下「OK」按鈕後，你會發現PCB板恢復成了方形。

<div style="text-align: CENTER"><img src="image-20230510100738637.png" alt="image-20230510100738637" style="width:35%;" />　　　<img src="image-20230510100950813.png" alt="image-20230510100950813" style="width:35%;" /></div>

###匯入bmp圖檔

- 在PCB板上添加圖標或標誌
- 準備一張bmp格式的圖檔
- 如果有其他格式的圖片，可以使用Windows內置的小畫家（Paint）打開，另存為bmp格式
- 確保圖像內容簡單，只有黑白兩色
- 如果圖像比較複雜，可以使用CorelDraw、Rhino或其他類似的繪圖軟件進行勾線，轉換為簡單的黑白圖像

<img src="IS.bmp" alt="IS" style="zoom: 67%;" />

- 從工具列中選擇「Automation」，選擇「Run ULP」
- *或在命令列中直接輸入「RUN ULP」*

<img src="image-20230510101220579.png" alt="image-20230510101220579" style="zoom: 50%;" />

- 在搜尋框中搜尋「bmp」
- 選擇「import-bmp」ULP
- 按下「OK」按鈕

<img src="image-20230510101427963.png" alt="image-20230510101427963" style="zoom:80%;" />

- 選擇準備好的bmp圖像文件
- 按下「Open」按鈕
- 在彈出的對話框中，選擇要匯入的顏色，例如只選擇黑色

![image-20230510101624691](image-20230510101624691.png)

- 在`Format`中，選擇`DPI`
- `Unit`選擇`Inch`
- 計算DPI值：
	- PCB板寬度為7cm，即2750mil，即2.75 inch，匯入的圖片X軸寬度為569 Pixel
	- DPI值：$ \frac{569 pixel}{2.75 inch} \approx 200dpi$
- 如果圖像是用CorelDraw或Rhino等軟件勾線或畫出來的，匯出時可以選擇DPI，只需輸入相同的DPI值
- 按`OK`

![image-20230510101816946](image-20230510101816946.png)

- 在修改圖像尺寸和比例(拖動綠色外框)
- 找到「DISPLAY LAYERS」中的「200bmp」層
- **<u>*鎖定*</u>**「200bmp」層，以防止不小心編輯到
- 修改或拖動板的比例(拖動綠色外框)

<img src="image-20230510103555528.png" alt="image-20230510103555528" style="zoom: 50%;" />

###排好LED

- LED排列需考慮以下原則：
	1. 確定LED方向
	2. 縮短線路
	3. 減少過孔數量
	4. 確保LED數量為4的倍數；如果剩下一或兩顆LED，可以調整位置，排列在一起以避免加電阻對光度帶來的影響
- 可以考慮首尾相連的接線，以縮短線路

<img src="image-20230510103928029.png" alt="image-20230510103928029" style="zoom: 67%;" />

<img src="image-20230510104248179.png" alt="image-20230510104248179" style="zoom:67%;" />

### 自動佈線

- 在進行自動佈線之前，需要設定佈線規則
	- 在命令列中輸入`DRC`，打開DRC對話框，對PCB進行設定檢查
- 由於蝕刻線路板需要考量製作的難易度，==將所有置設定為`20mil`==
- **如果缺乏信心，可以設定更大的值，例如`30mil`，以降低出錯的風險**

<img src="image-20230510105136345.png" alt="image-20230510105136345" style="width:45%;" /><img src="image-20230510105155872.png" alt="image-20230510105155872" style="width:45%;" />

<img src="image-20230510105208936.png" alt="image-20230510105208936" style="width:45%;" /><img src="image-20230510105231891.png" alt="image-20230510105231891" style="width:45%;" />



- 按下自動佈線的icon
- Fusion360預設為雙面板，但雙面板需要鑽過孔和難以對位
- 將`16Bottom`轉成`N/A`，即不佈線
- 按下`Continue`

<div style="text-align: center">
<img src="image-20230505154108192.png" alt="image-20230505154108192" style="zoom: 67%;" /><img src="image-20230510104838994.png" alt="image-20230510104838994" style="zoom:80%;" />
</div>



- 由於線圖板只佈頂層，**佈線沒有100%是正常的**
- 如果未接的線路超過了95%，需要仔細檢查找出問題所在
	- 可能原因包括元件排列的順序錯誤、線路太緊湊沒有足夠的空間等
- 在進行自動佈線之前，建議先將元件排列好，確保它們之間有足夠的空間，這樣可以提高自動佈線的成功率

![image-20230510104902936](image-20230510104902936.png)

### 手動佈線

- 按下手動佈線的icon，進行手動佈線

![image-20230510105053940](image-20230510105053940.png)

- 在進行佈線時，按下==滑鼠中鍵（即滾輪按鍵）==，可在頂層和底層之間切換
- 每次切換層面都需要添加過孔，如果末佈線太多，需要添加太多的過孔，會增加PCB製作難度
	- 所以在自動佈線時，需要考慮末佈線的數量，盡可能減少需要添加的過孔數量

<img src="image-20230510105310262.png" alt="image-20230510105310262" style="zoom:67%;" />



- 在進行PCB設計時，需要考慮到過孔的尺寸，以便製作和生產
	- 對著過孔按滑鼠右鍵
	- 選擇`Properties`
	- 將過孔尺寸增加到==`1mm`==，在過孔周圍加上==`2mm`==寬的佈線，以便後續的PCB製作和生產
- 預設過孔尺寸跟線寬成正比，但如果線寬只有0.5mm，過孔尺寸也只有0.5mm，鑽頭容易折斷

<div style="text-align: CENTER"><img src="image-20230510105332525.png" alt="image-20230510105332525"  />　　<img src="image-20230510105403980.png" alt="image-20230510105403980"  />　　<img src="image-20230510105421131.png" alt="image-20230510105421131" style="zoom:80%;" /></div>



- 增加全部過孔的尺寸後，使用**<u>*`polygon`*</u>**指令將電路佈上覆銅，只留下要蝕刻的空位
- ==使用DRC命令檢查PCB設計==，確保符合標準規範
	- 如果DRC檢查出錯，需要進行必要的修正，直到DRC檢查通過為止
- 完成這些步驟後，可以將PCB設計文件導出到相應的文件格式，以進行PCB製造和生產

<img src="image-20230510104734309.png" alt="image-20230510104734309" style="width: 47%;" /><img src="image-20230510104720059.png" alt="image-20230510104720059" style="width: 47%;" />

## 蝕刻電路板

###準備列印文件

1. 步驟一:
	- 在左側欄只顯示`1 Top`、`17 Pads`、`18 Vias`和`20 Dimension`這四個層。
	- 點選**兩次**最左上角的「眼睛」圖示，然後分別點擊這四個層旁邊的「眼睛」圖示，把它們打開。
	- 其他層的「眼睛」圖示則關閉。
	- 在命令欄輸入`print`。

<img src="image-20230601094900807.png" alt="image-20230601094900807" style="zoom:80%;" />

<img src="Screenshot 2023-06-01 091336.png" alt="Screenshot 2023-06-01 091336" style="zoom: 50%;" />



2. 步驟二:
	- 在列印控制畫面中，選擇`Print to File(PDF)`作為列印的目標打印機，選擇輸出檔案的位置
	- 在`Options`選項中，==勾選`Mirror`選項==以鏡像的方式列印電路圖
		- 電路首先列印在熱轉印紙上，再透過熱力和壓力將油黑轉到覆銅板之上，因此需要鏡像
	- 選擇`Black`以強制將列印內容轉為黑白
	- 選擇`Solid`以將打印的內容轉為填滿的實體
	- ==在`Scale`選項中將`Scale factor`設為`1`==

<img src="Screenshot 2023-06-01 091845.png" alt="Screenshot 2023-06-01 091845" style="zoom:67%;" />



3. 步驟三:
	- 完成頂層後返回編輯畫面
	- 隱藏頂層，只顯示`2 Bottom`、`17 Pads`、`18 Vias`和`20 Dimension`這四個層
	- 在命令欄輸入`print`

<img src="Screenshot 2023-06-01 092020.png" alt="Screenshot 2023-06-01 092020" style="zoom:50%;" />



4. 步驟四:
	- 輸出檔案到指定位置，例如桌面，務必**<u>*修改檔案名稱*</u>**，否則會覆蓋頂層的PDF
	- 在`Options`中，==不要勾選`Mirror`==，因為底層已經是穿過PCB板看到的，不需要再鏡像

<img src="Screenshot 2023-06-01 093131.png" alt="Screenshot 2023-06-01 093131" style="zoom: 67%;" />

5. 步驟五:
	- 檢查一下上述注意事項有沒有錯誤
	- 將兩個PDF交給我列印在熱轉印紙上

### 正面熱轉印

- 將覆銅板用400號**<u>水磨砂紙</u>**在水中研磨兩邊去除氧化物
- 用**<u>酒精</u>**清潔乾淨兩邊
- 將熱轉印紙的頂層剪下來
- 用耐熱膠紙**緊貼**在覆銅板上
	- 記得一==定要貼服==，否則油墨會「失焦」

<img src="PXL_20230531_015540830.jpg" alt="PXL_20230531_015540830" style="zoom:67%;" />

- 將熱轉印機的溫度設定`180度`
	- *如果沒有熱轉印機，用家用熨斗也可以*
- 先等待機器預熱燈**不閃爍**，即溫度足夠
- 將覆銅板放入滾輪讓其慢慢壓平和加溫
	- *如果用熨斗的話，記得要平均施加壓力*
- 覆銅板在後放吐出後，再放入前方滾輪重覆加熱多一次
	- ==不要用手觸摸吐出的覆銅板，覆銅板會非常熱==

<img src="PXL_20230531_035431409.jpg" alt="PXL_20230531_035431409" style="width:67%;" />

- 下面是熱轉印後的板
- 可以見到左上角因不貼服而「失焦」了
- 左圖是正常的線
- 右圖是轉印得不好的線

<img src="PXL_20230531_015801326.jpg" alt="PXL_20230531_015801326" style="zoom:67%;" />

<img src="PXL_20230531_020858378.jpg" alt="PXL_20230531_020858378" style="width:45%;" /><img src="PXL_20230531_020918286.jpg" alt="PXL_20230531_020918286" style="width:45%;" />



- 可以在放大鏡底下用**<u>0.2mm針筆</u>**手動將線修補
	- **<u>*仔細修補和檢查*</u>**，否則蝕刻後斷線需要用幼電線修補，比用針筆更麻煩

<img src="PXL_20230531_035008521.jpg" alt="PXL_20230531_035008521" style="zoom:50%;" />



###鑽孔

- 接著將過孔和穿孔元件鑽孔

<img src="PXL_20230531_032810925.jpg" alt="PXL_20230531_032810925" style="zoom:67%;" />

### 背面熱轉印

- 將背面的熱轉印圖檔透過燈光對齊
- 用防熱膠紙固定
- 用轉印機加熱兩次
	- 我的範例由於線路較少，所以選擇用手繪

<img src="PXL_20230531_032651469.jpg" alt="PXL_20230531_032651469" style="zoom:67%;" />

### 裁切覆銅板

- 用閘床將覆銅板裁去多餘的部分

  - ==小心操作，以免傷手==
  - ==裁的時候記得用紙墊著==，防止油墨刮落

- 左邊的圖片我沒有用紙墊著底部，有明顯花痕

- 右邊的圖片我用箱頭筆將其修好

	<img src="PXL_20230531_033943158.jpg" alt="PXL_20230531_033943158" style="width:45%;" /><img src="PXL_20230531_034616464.jpg" alt="PXL_20230531_034616464" style="width:45%;" />

### 調校蝕刻劑

- 蝕刻劑和水以1:4的分量調和

  - 準備`12.5克(g)`的粉劑
  - 準備`50毫升(ml)`的**熱水**
  	- 熱水有助加速化學反應
  - 混和直至全部融解

- ==注意事項：==

	- ==使用蝕刻劑後，**要洗手**，如有誤入眼睛，要立即以清水沖洗。==
	- ==蝕刻劑要存放在遠離兒童的陰涼乾燥處。==
	- ==蝕刻劑配好的液體不要放在密閉容器中，因為會**釋放氧氣**，使容器內壓力升高。==
	- ==蝕刻劑本身無毒無害，但廢液中含有**<u>*重金屬*</u>**的銅離子，因此在丟棄之前，請使用鹼性物質如純鹼或石灰來處理，再進行妥善處置。==

	<img src="PXL_20230531_051158378.jpg" alt="PXL_20230531_051158378" style="width:45%;" /><img src="PXL_20230531_051506101.jpg" alt="PXL_20230531_051506101" style="width:45%;" />

###蝕刻

- 將覆銅板放入溶液中
- 用手晃動容器
	- 動作要足夠大，**令覆銅板要溶液中飄流**
	- 不要讓覆銅板停留在容器底，確保板底同樣有溶液能接觸
	- 不時用攝子夾起覆銅板將其底面**反轉**
	- **小心熱水濺出會燙到手**
	- **建議戴手套進行**
- 透明的溶液會慢慢變成藍色
- 外露的銅會由閃亮慢慢變白
- 整個過程大約5分鐘

<img src="PXL_20230531_051623909.jpg" alt="PXL_20230531_051623909" style="width:45%;" /><img src="PXL_20230531_051805324.jpg" alt="PXL_20230531_051805324" style="width:45%;" />

<img src="PXL_20230531_052408898.jpg" alt="PXL_20230531_052408898" style="width:45%;" /><img src="PXL_20230531_052414079.jpg" alt="PXL_20230531_052414079" style="width:45%;" />

### 檢查電路板

- 我的範例背面由於是用箱頭筆上色，蝕刻中掉色，令銅大量外露

- 印乾電路板後，在放大鏡中仔細觀念:

	- 是否所有外露的覆銅都已蝕刻掉
	- 有否電線因蝕刻太久而斷掉

	

<img src="PXL_20230531_054034613.jpg" alt="PXL_20230531_054034613" style="width:45%;" /><img src="PXL_20230531_054042875.jpg" alt="PXL_20230531_054042875" style="width:45%;" />

- 可以見到當初專登用針筆補色的線完好無缺
- 而背面用箱頭筆劃的已經斷掉，之後要用電線焊接

<img src="PXL_20230531_054640271.jpg" alt="PXL_20230531_054640271" style="width:45%;" /><img src="PXL_20230531_054937379.jpg" alt="PXL_20230531_054937379" style="width:45%;" />
